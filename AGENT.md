# Rhubarb Dogma Static Site

This is a static site generator project for the Rhubarb Dogma website. The main content lives in the `static/` directory.

## Directory Structure

```
/
├── generate_pages.py        # Static page generator script
├── config.py               # Configuration for page generation
├── Taskfile.yaml           # Build automation tasks
├── templates/              # Jinja2 templates for generated pages
│   ├── base.html           # Base template with common layout
│   ├── sketchbook.html     # Template for individual sketchbooks
│   └── sketchdump.html     # Template for sketch dump page
└── static/                 # Static website content
    ├── index.html          # Main landing page
    ├── map.html            # Year Two Comet world map
    ├── archive.html        # Archive landing page
    ├── sketchdump.html     # Generated sketch gallery
    ├── style.css           # Generated CSS (from Tailwind)
    ├── tailwind.css        # Tailwind source file
    ├── script.js           # Main page scripts
    ├── archive/
    │   ├── sb1.html - sb5.html  # Generated sketchbook pages
    │   ├── sb1/ - sb5/          # Sketchbook image directories
    │   └── *.jpg                # Archive cover images
    ├── cluton/             # Cluton world area pages
    ├── hydrum/             # Hydrum world area pages
    ├── sepine/             # Sepine world area pages
    ├── surpet/             # Surpet world area pages
    ├── vespilk/            # Vespilk world area pages
    ├── css/                # Modular CSS files
    ├── js/                 # JavaScript modules
    ├── svg/                # SVG icons and graphics
    └── sounds/             # Audio files
```

## Architecture Overview

- Interactive map-based navigation for the "Year Two Comet" world
- Archive section with sketchbook galleries
- Sketch dump gallery
- Multiple themed areas (Cluton, Hydrum, Sepine, Surpet, Vespilk)

## Build Process

The site uses a hybrid approach:
- **Static pages**: Most pages are hand-written HTML files in the `static/` directory
- **Generated pages**: Archive sketchbooks and sketchdump pages are generated using Jinja2 templates
- **CSS**: Tailwind CSS compiled to `static/style.css`
- **Task automation**: `Taskfile.yaml` handles the complete build pipeline

### Build Commands

Use Task to build and serve the site:

```bash
# Generate pages + build CSS + serve locally
task default

# Individual steps:
task generate    # Run uv run generate_pages.py
task build       # Compile Tailwind CSS
task serve       # Start local server
```

### Generated Content

The page generator (`generate_pages.py`) uses Jinja2 templates to create:
- `static/archive/sb1.html` - `static/archive/sb5.html` (sketchbook galleries)  
- `static/sketchdump.html` (sketch dump gallery)

**Configuration**: Edit `config.py` to add/modify sketchbooks:
```python
SKETCHBOOKS = [
    ("sb1", "Sketchbook 1"),
    ("sb2", "Sketchbook 2"),
    # Add new sketchbooks here
]
```

**Templates**: Modify HTML structure in `templates/` directory:
- `base.html` - Common layout, modal, navigation
- `sketchbook.html` - Individual sketchbook page layout
- `sketchdump.html` - Two-column sketch dump layout

Existing JS modules:
- `js/modal.js` - Image modal functionality for galleries
- `js/card3d.js` - 3D card effects
- `js/scrollbar.js` - Custom scrollbar styling
- `script.js` - map.html page interactions


## Navigation Structure

The site has a consistent navbar across all pages:
```html
<header>
    <a href="/" class="font-times text-xl hover:underline absolute top-0 left-0 m-4 z-10">rhubarb dogma</a>
    <nav class="absolute top-0 right-0 m-4 z-10">
        <!-- Navigation items can be added here -->
    </nav>
</header>
```

## Development Notes

### Page Generation
- Dynamic content generation uses `generate_pages.py` with Jinja2 templates
- Image galleries automatically discover images in their directories
- New sketchbooks require manual configuration in `config.py` (intentional for layout control)

### Styling Guidelines
- **Never edit `style.css` directly** - it's auto-generated by Tailwind CSS
- Edit `static/tailwind.css` for custom styles, then run `task build`
- Avoid inline styles - use Tailwind classes or add to `tailwind.css`

### JavaScript Guidelines  
- Don't inline JavaScript with `<script>` tags
- Place JS in appropriate `.js` files in `static/js/` directory
- Link JS files in HTML pages that need them
- Create new descriptive `.js` files when needed

### Technical Details
- Image galleries use `modal.js` for lightbox functionality
- World map areas use HTML image maps for navigation  
- Pages support both JPG and PNG images with lazy loading
- First 4 images load eagerly, rest are lazy-loaded for performance
